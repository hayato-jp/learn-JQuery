<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html14/loose.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title>サンプル</title>
    <style type="text/css">
      #base {
        top: 0px;
        left: 0px;
        width: 500px;
        height: 500px;
        background-color: #CCCCCF;
      }
      .msg {
        margin: 5px;
        padding: 5px;
        border: 10px double #AAAAAA;
        width: 100px;
        height: 100px;
        position:absolute;
        background-color: #FFAAAA;
      }
      .sel {
        background-color: #FF6666;
      }
    </style>
    <script src="js/jquery-1.3.2.min.js"></script>
    <script type="text/javascript">
      <!--
        $(document).ready(function() {
          $("#base").click(doAction);
          $("#base").data("sel",$("#msg0"));
          $(".msg").each(function(i){
            $(this).click(doSelect);
            $(this).data("x",100 * i);
            $(this).data("y",100 * i);
            $(this).css("left",(100 * i)+ "px");
            $(this).css("top",(100 * i) + "px");
          });
            $("#msg0").addClass("sel");
        });

        function doSelect(event) {
          $(".msg").removeClass("sel");
          $(".#base").data("sel",$(this));
          $(this).addClass("sel");
          return false;
        }

        function doAction(event) {
          var x = event.clientX - 50;
          var y = event.clientY - 50;
          var target = $("#base").data("sel");
          target.animate({left:x + "px",top:y + "px"},1500,callback);
        }

        function callback() {
          var target = $("#base").data("sel");
          var x = target.data("x");
          var y = target.data("y");
          target.animate({left:x + "px",top:y + "px"},1500);
        }
      //-->
    </script>
  </head>
  <body>
    <div id="base">
      <h1 id="title">サンプル</h1>
      <div id="msg0" class="msg" >メッセージ</div>
      <div id="msg1" class="msg" >メッセージ</div>
      <div id="msg2" class="msg" >メッセージ</div>
      <input type="button" value="クリック" />
    </div>
  </body>
</html>